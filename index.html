<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz : Alimentation et Perte de Poids</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Variables CSS */
        :root {
            --primary-color: #66BB6A; /* Vert clair, accueillant */
            --primary-dark: #388E3C; /* Vert plus fonc√© */
            --secondary-color: #81D4FA; /* Bleu ciel, doux */
            --background-light: #e0f2f7; /* Fond tr√®s l√©ger bleu-vert */
            --card-background: #FFFFFF; /* Blanc pur pour les cartes */
            --text-color: #424242; /* Gris fonc√© doux */
            --border-color: #B2DFDB; /* Bordure douce */
            --shadow-light: rgba(0,0,0,0.1);
            --success-color: #4CAF50;
            --error-color: #F44336;
            --info-color: #26C6DA; /* Cyan */
            --accent-color: #FFB74D; /* Orange doux pour les ic√¥nes */
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 15px;
            background-color: var(--background-light);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
            overflow-x: hidden; /* Pr√©vient les barres de d√©filement horizontales dues aux animations */
        }
        .container {
            background-color: var(--card-background);
            padding: 30px 20px;
            border-radius: 20px; /* Plus arrondi */
            box-shadow: 0 12px 30px var(--shadow-light); /* Ombre plus prononc√©e */
            max-width: 700px;
            width: 100%;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s forwards ease-out;
            position: relative; /* Pour la barre de progression */
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: var(--primary-dark);
            margin-bottom: 20px;
            font-size: 1.9em;
            font-weight: 700;
            line-height: 1.3;
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 25px;
            overflow: hidden; /* Pour que la barre de progression reste √† l'int√©rieur */
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--primary-color);
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        /* Quiz Sections */
        .quiz-section {
            text-align: left;
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 15px; /* Plus arrondi */
            background-color: #fcfcfc;
            border: 1px solid var(--border-color);
            transition: all 0.4s ease-in-out; /* Transition plus rapide */
            opacity: 0;
            transform: translateX(20px);
            position: absolute; /* Pour permettre les animations de slide */
            width: calc(100% - 30px); /* Ajustement pour le padding */
            left: 15px;
            top: auto; /* Laisse le positionnement naturel pour la hauteur */
        }
        .quiz-section.active {
            opacity: 1;
            transform: translateX(0);
            position: relative; /* Reviens √† la position normale */
        }
        .quiz-section p {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 20px;
            font-size: 1.1em;
        }
        .quiz-section label {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            cursor: pointer;
            padding: 12px 15px;
            background-color: #f5f5f5;
            border: 2px solid transparent;
            border-radius: 10px; /* Plus arrondi */
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* Petite ombre */
        }
        .quiz-section label:hover {
            background-color: #e0e0e0;
            border-color: var(--primary-color);
            transform: translateY(-2px); /* L√©ger effet hover */
        }
        .quiz-section input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.4); /* Agrandir le bouton radio */
            accent-color: var(--primary-color);
            cursor: pointer;
        }
        .quiz-section input[type="radio"]:checked + span {
            font-weight: 700;
            color: var(--primary-dark);
        }
        .quiz-section input[type="radio"]:checked ~ label {
            background-color: #e8f5e9; /* Vert tr√®s clair */
            border-color: var(--primary-dark);
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.2);
            transform: translateY(-2px);
        }
        
        /* Ic√¥nes pour les options (exemple Font Awesome, ou √©mojis) */
        .option-icon {
            margin-right: 10px;
            font-size: 1.2em;
            color: var(--accent-color); /* Couleur vive pour les ic√¥nes */
        }

        /* Boutons de navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 10px; /* Plus arrondi */
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            flex-grow: 1;
            margin: 0 8px; /* Plus d'espace entre les boutons */
        }
        button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px); /* Effet plus prononc√© */
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: translateY(0);
            box-shadow: none;
        }
        #prevQuestionBtn {
            background-color: #90A4AE; /* Gris bleut√© */
        }
        #prevQuestionBtn:hover {
            background-color: #607D8B;
        }

        /* Section du r√©sultat et t√©l√©chargement */
        #resultatQuiz {
            margin-top: 40px;
            padding: 30px;
            border-radius: 15px;
            background-color: #e8f5e9; /* Vert tr√®s clair */
            color: var(--text-color);
            font-size: 1.05em;
            text-align: left;
            display: none;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            animation: fadeIn 0.8s forwards;
        }
        #resultatQuiz h2 {
            color: var(--primary-dark);
            margin-bottom: 15px;
            font-size: 1.7em;
        }
        #recapitulatifReponses h3 {
            font-size: 1.35em;
            margin-top: 25px;
            margin-bottom: 15px;
            color: var(--info-color);
            border-bottom: 2px solid var(--info-color); /* Ligne sous le titre */
            padding-bottom: 5px;
        }
        .recap-question {
            margin-bottom: 18px;
            padding: 12px 18px;
            background-color: #f0f4f7; /* Bleu gris l√©ger */
            border-left: 6px solid var(--secondary-color); /* Plus √©pais */
            border-radius: 8px;
            transition: transform 0.2s ease;
        }
        .recap-question:hover {
            transform: translateX(5px);
        }
        .recap-question p {
            margin: 0;
            font-weight: normal;
        }
        .recap-question .score-evaluation {
            font-size: 0.9em;
            color: #616161;
            margin-top: 8px;
            font-style: italic;
        }

        #downloadSection {
            margin-top: 35px;
            padding: 30px;
            background-color: #e3f2fd; /* Bleu tr√®s tr√®s clair */
            border: 1px solid #90CAF9;
            border-radius: 15px;
            text-align: center;
            display: none;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            animation: fadeIn 0.8s forwards;
        }
        #downloadSection h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 1.7em;
        }
        #downloadPdfBtn {
            margin-top: 20px;
            background-color: var(--secondary-color);
        }
        #downloadPdfBtn:hover {
            background-color: #42A5F5;
        }
        .error-message {
            color: var(--error-color);
            margin-top: 15px;
            font-weight: 600;
            display: none;
            font-size: 0.95em;
        }

        /* MEDIA QUERIES pour les √©crans plus grands */
        @media (min-width: 600px) {
            body {
                padding: 20px;
            }
            .container {
                padding: 50px;
            }
            h1 {
                font-size: 2.5em;
            }
            .quiz-section p {
                font-size: 1.2em;
            }
            .quiz-section label {
                padding: 15px 20px;
            }
            .quiz-section input[type="radio"] {
                transform: scale(1.5);
            }
            button {
                font-size: 1.1em;
            }
            #resultatQuiz h2 {
                font-size: 2em;
            }
            #recapitulatifReponses h3 {
                font-size: 1.5em;
            }
            .recap-question p {
                font-size: 1em;
            }
            .recap-question .score-evaluation {
                font-size: 0.9em;
            }
            #downloadSection h2 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>D√©couvre les Secrets de ta Perte de Poids !</h1>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <form id="quizForm">
            <div class="quiz-section active" data-question-id="1">
                <p>1. Sautes-tu un repas dans la journ√©e ?</p>
                <label><input type="radio" name="q1" value="A"> <span class="option-icon">üçΩÔ∏è</span> <span>A. Oui, souvent le petit-d√©j</span></label>
                <label><input type="radio" name="q1" value="B"> <span class="option-icon">‚è∞</span> <span>B. Oui, souvent le d√©jeuner (midi)</span></label>
                <label><input type="radio" name="q1" value="C"> <span class="option-icon">‚úÖ</span> <span>C. Non, je mange 3 repas par jour</span></label>
                <label><input type="radio" name="q1" value="D"> <span class="option-icon">ü§î</span> <span>D. Je mange √† des horaires irr√©guliers</span></label>
            </div>

            <div class="quiz-section" data-question-id="2">
                <p>2. Le midi, tu manges plut√¥t :</p>
                <label><input type="radio" name="q2" value="A"> <span class="option-icon">ü•°</span> <span>A. Un plat tout pr√™t, ou sur le pouce</span></label>
                <label><input type="radio" name="q2" value="B"> <span class="option-icon">ü•ó</span> <span>B. Un vrai repas complet et √©quilibr√©</span></label>
                <label><input type="radio" name="q2" value="C"> <span class="option-icon">ü•£</span> <span>C. Une salade ou une soupe l√©g√®re</span></label>
                <label><input type="radio" name="q2" value="D"> <span class="option-icon">üí®</span> <span>D. Je saute ce repas par manque de temps ou d‚Äôapp√©tit</span></label>
            </div>

            <div class="quiz-section" data-question-id="3">
                <p>3. Ton sommeil : tu dors en moyenne‚Ä¶</p>
                <label><input type="radio" name="q3" value="A"> <span class="option-icon">üò¥</span> <span>A. Moins de 5h par nuit</span></label>
                <label><input type="radio" name="q3" value="B"> <span class="option-icon">üåô</span> <span>B. Entre 5h et 6h</span></label>
                <label><input type="radio" name="q3" value="C"> <span class="option-icon">üõå</span> <span>C. Entre 7h et 8h</span></label>
                <label><input type="radio" name="q3" value="D"> <span class="option-icon">üí§</span> <span>D. 9h ou plus</span></label>
            </div>

            <div class="quiz-section" data-question-id="4">
                <p>4. Ton d√Æner, c‚Äôest souvent :</p>
                <label><input type="radio" name="q4" value="A"> <span class="option-icon">üçï</span> <span>A. Un plat plaisir (raclette, pizza, burger maison‚Ä¶)</span></label>
                <label><input type="radio" name="q4" value="B"> <span class="option-icon">ü•ïü•©</span> <span>B. Un repas √©quilibr√© (prot√©ines, l√©gumes, un peu de f√©culents)</span></label>
                <label><input type="radio" name="q4" value="C"> <span class="option-icon">üçµ</span> <span>C. Une soupe + yaourt ou fruit</span></label>
                <label><input type="radio" name="q4" value="D"> <span class="option-icon">üì∫</span> <span>D. Je mange devant la t√©l√© sans trop me rappeler quoi</span></label>
            </div>

            <div class="quiz-section" data-question-id="5">
                <p>5. Combien de fois par semaine manges-tu des pizzas, burgers ou fast-food ?</p>
                <label><input type="radio" name="q5" value="A"> <span class="option-icon">üçîüçü</span> <span>A. 3 fois ou plus</span></label>
                <label><input type="radio" name="q5" value="B"> <span class="option-icon">ü§î</span> <span>B. 1 √† 2 fois</span></label>
                <label><input type="radio" name="q5" value="C"> <span class="option-icon"> infrequent</span> <span>C. Rarement, une fois de temps en temps</span></label>
                <label><input type="radio" name="q5" value="D"> <span class="option-icon">üö´</span> <span>D. Jamais, j‚Äô√©vite compl√®tement</span></label>
            </div>

            <div class="quiz-section" data-question-id="6">
                <p>6. Manges-tu souvent devant un √©cran ?</p>
                <label><input type="radio" name="q6" value="A"> <span class="option-icon">üì∫</span> <span>A. Toujours devant la t√©l√©</span></label>
                <label><input type="radio" name="q6" value="B"> <span class="option-icon">üì±</span> <span>B. Souvent devant mon t√©l√©phone</span></label>
                <label><input type="radio" name="q6" value="C"> <span class="option-icon">ü§∑‚Äç‚ôÄÔ∏è</span> <span>C. Parfois, mais j‚Äôessaie de faire attention</span></label>
                <label><input type="radio" name="q6" value="D"> <span class="option-icon">üßò‚Äç‚ôÄÔ∏è</span> <span>D. Non, je mange √† table sans distraction</span></label>
            </div>

            <div class="quiz-section" data-question-id="7">
                <p>7. Apr√®s tes repas, tu te sens :</p>
                <label><input type="radio" name="q7" value="A"> <span class="option-icon">ü§¢</span> <span>A. Fatigu√©e ou ballonn√©e</span></label>
                <label><input type="radio" name="q7" value="B"> <span class="option-icon"> cravings</span> <span>B. Encore un peu affam√©e</span></label>
                <label><input type="radio" name="q7" value="C"> <span class="option-icon">üòä</span> <span>C. Satisfaite et rassasi√©e</span></label>
                <label><input type="radio" name="q7" value="D"> <span class="option-icon">üç∞</span> <span>D. Pr√™te √† grignoter ou chercher un dessert</span></label>
            </div>

            <div class="quiz-section" data-question-id="8">
                <p>8. Tes apports en prot√©ines, tu dirais que‚Ä¶</p>
                <label><input type="radio" name="q8" value="A"> <span class="option-icon">ü•©‚¨áÔ∏è</span> <span>A. J‚Äôen mange trop peu ou pas √† chaque repas</span></label>
                <label><input type="radio" name="q8" value="B"> <span class="option-icon">ü§∑‚Äç‚ôÄÔ∏è</span> <span>B. Je n‚Äôai aucune id√©e de combien il m‚Äôen faut</span></label>
                <label><input type="radio" name="q8" value="C"> <span class="option-icon">üí™</span> <span>C. Je fais attention √† en avoir √† chaque repas (25‚Äì30g midi/soir)</span></label>
                <label><input type="radio" name="q8" value="D"> <span class="option-icon">üåø‚ùì</span> <span>D. Je suis v√©g√©/v√©gan mais sans suivi pr√©cis</span></label>
            </div>

            <div class="quiz-section" data-question-id="9">
                <p>9. Dans tes repas principaux, il y a souvent des f√©culents ?</p>
                <label><input type="radio" name="q9" value="A"> <span class="option-icon">üçöü•ñ</span> <span>A. Dans les deux repas (p√¢tes, riz, pain‚Ä¶)</span></label>
                <label><input type="radio" name="q9" value="B"> <span class="option-icon">üçù</span> <span>B. Au moins une fois par jour</span></label>
                <label><input type="radio" name="q9" value="C"> <span class="option-icon">ü•¶ü•©</span> <span>C. Tr√®s peu, je privil√©gie l√©gumes et prot√©ines</span></label>
                <label><input type="radio" name="q9" value="D"> <span class="option-icon">ü§∑‚Äç‚ôÄÔ∏è</span> <span>D. Je ne fais pas attention</span></label>
            </div>

            <div class="quiz-section" data-question-id="10">
                <p>10. Combien de pas fais-tu en moyenne chaque jour ?</p>
                <label><input type="radio" name="q10" value="A"> <span class="option-icon">üö∂‚Äç‚ôÄÔ∏è‚¨áÔ∏è</span> <span>A. Moins de 5000</span></label>
                <label><input type="radio" name="q10" value="B"> <span class="option-icon">üö∂‚Äç‚ôÄÔ∏èüí®</span> <span>B. Entre 5000 et 7000</span></label>
                <label><input type="radio" name="q10" value="C"> <span class="option-icon">üèÉ‚Äç‚ôÄÔ∏è</span> <span>C. Entre 7000 et 10 000</span></label>
                <label><input type="radio" name="q10" value="D"> <span class="option-icon">üöÄ</span> <span>D. Plus de 10 000</span></label>
            </div>

            <p class="error-message" id="errorMessage">Veuillez s√©lectionner une r√©ponse pour continuer.</p>

            <div class="navigation-buttons">
                <button type="button" id="prevQuestionBtn" style="display: none;">Pr√©c√©dent</button>
                <button type="button" id="submitQuizBtn" style="display: none;">Obtenir mon diagnostic</button>
            </div>
        </form>

        <div id="resultatQuiz">
            <h2>Ton bilan personnalis√© :</h2>
            <p id="diagnosticIntro"></p>
            <div id="recapitulatifReponses">
                <h3>R√©capitulatif de tes r√©ponses :</h3>
            </div>
            <p id="diagnosticText"></p>
        </div>

        <div id="downloadSection">
            <h2>T√©l√©charge maintenant ta liste de courses indispensable pour une perte de poids !</h2>
            <button id="downloadPdfBtn">Obtenir ma liste de courses</button>
        </div>
    </div>

    <script>
        const quizSections = document.querySelectorAll('.quiz-section');
        const prevBtn = document.getElementById('prevQuestionBtn');
        const submitBtn = document.getElementById('submitQuizBtn');
        const errorMessage = document.getElementById('errorMessage');
        const resultatQuizDiv = document.getElementById('resultatQuiz');
        const diagnosticIntroElement = document.getElementById('diagnosticIntro');
        const recapitulatifReponsesDiv = document.getElementById('recapitulatifReponses');
        const diagnosticTextElement = document.getElementById('diagnosticText');
        const downloadSectionDiv = document.getElementById('downloadSection');
        const progressBar = document.getElementById('progressBar');

        let currentQuestionIndex = 0;
        const totalQuestions = quizSections.length;
        const userAnswers = {}; // Pour stocker les r√©ponses de l'utilisateur

        // D√©finitions des questions et de leurs r√©ponses avec des scores et commentaires
        const questionsData = {
            q1: {
                text: "Sautes-tu un repas dans la journ√©e ?",
                options: {
                    A: { label: "A. Oui, souvent le petit-d√©j", score: 3, comment: "Sauter le petit-d√©jeuner peut perturber ton m√©tabolisme et favoriser le grignotage." },
                    B: { label: "B. Oui, souvent le d√©jeuner (midi)", score: 3, comment: "Passer le d√©jeuner peut mener √† des baisses d'√©nergie et des envies de sucre plus tard." },
                    C: { label: "C. Non, je mange 3 repas par jour", score: 0, comment: "C'est une excellente habitude pour maintenir ton √©nergie et r√©guler l'app√©tit tout au long de la journ√©e." },
                    D: { label: "D. Je mange √† des horaires irr√©guliers", score: 2, comment: "Des repas √† heures fixes aident √† r√©guler la faim, la digestion et √† pr√©venir les pics de glyc√©mie." }
                }
            },
            q2: {
                text: "Le midi, tu manges plut√¥t :",
                options: {
                    A: { label: "A. Un plat tout pr√™t, ou sur le pouce", score: 3, comment: "Les plats pr√©par√©s sont souvent riches en sucres cach√©s, sel et graisses satur√©es, ce qui nuit √† la perte de poids." },
                    B: { label: "B. Un vrai repas complet et √©quilibr√©", score: 0, comment: "Parfait ! Un repas √©quilibr√© au d√©jeuner, riche en prot√©ines et l√©gumes, est la cl√© d'une bonne √©nergie et d'une sati√©t√© durable." },
                    C: { label: "C. Une salade ou une soupe l√©g√®re", score: 1, comment: "Bonne intention, mais assure-toi d'avoir assez de prot√©ines et de bonnes graisses pour √™tre bien rassasi√©(e) et √©viter les fringales." },
                    D: { label: "D. Je saute ce repas par manque de temps ou d‚Äôapp√©tit", score: 3, comment: "Sauter un repas n'est pas id√©al pour une perte de poids durable et peut ralentir ton m√©tabolisme." }
                }
            },
            q3: {
                text: "Ton sommeil : tu dors en moyenne‚Ä¶",
                options: {
                    A: { label: "A. Moins de 5h par nuit", score: 4, comment: "Un manque de sommeil s√©v√®re peut s√©rieusement d√©r√©gler les hormones de la faim (leptine et ghr√©line), augmentant les fringales et le stockage des graisses." },
                    B: { label: "B. Entre 5h et 6h", score: 2, comment: "Un sommeil insuffisant peut impacter ton √©nergie, ta motivation √† bouger et tes choix alimentaires." },
                    C: { label: "C. Entre 7h et 8h", score: 0, comment: "Id√©al ! Un sommeil suffisant et r√©parateur est fondamental pour la r√©gulation du poids, la r√©cup√©ration musculaire et le bien-√™tre g√©n√©ral." },
                    D: { label: "D. 9h ou plus", score: 1, comment: "Trop de sommeil peut parfois aussi √™tre li√© √† un m√©tabolisme ralenti ou d'autres facteurs. L'important est la qualit√© du sommeil." }
                }
            },
            q4: {
                text: "Ton d√Æner, c‚Äôest souvent :",
                options: {
                    A: { label: "A. Un plat plaisir (raclette, pizza, burger maison‚Ä¶)", score: 3, comment: "Les d√Æners lourds et riches avant de dormir peuvent perturber la digestion, le sommeil et favoriser le stockage des graisses." },
                    B: { label: "B. Un repas √©quilibr√© (prot√©ines, l√©gumes, un peu de f√©culents)", score: 0, comment: "Excellent choix ! Un d√Æner l√©ger, riche en prot√©ines et l√©gumes, favorise une bonne digestion nocturne et aide √† la r√©cup√©ration." },
                    C: { label: "C. Une soupe + yaourt ou fruit", score: 1, comment: "C'est l√©ger, mais assure-toi d'avoir suffisamment de prot√©ines pour ne pas avoir faim avant de dormir ou au r√©veil." },
                    D: { label: "D. Je mange devant la t√©l√© sans trop me rappeler quoi", score: 2, comment: "Manger en √©tant distrait devant un √©cran m√®ne souvent √† manger plus et √† moins appr√©cier le repas, sans conscience de la sati√©t√©." }
                }
            },
            q5: {
                text: "Combien de fois par semaine manges-tu des pizzas, burgers ou fast-food ?",
                options: {
                    A: { label: "A. 3 fois ou plus", score: 4, comment: "Ces aliments sont des bombes caloriques, riches en graisses, sucres et additifs, qui freinent significativement la perte de poids. C'est un point cl√© √† modifier." },
                    B: { label: "B. 1 √† 2 fois", score: 2, comment: "√Ä consommer avec mod√©ration. Ces repas fr√©quents peuvent compromettre tes objectifs de perte de poids et ta sant√© √† long terme." },
                    C: { label: "C. Rarement, une fois de temps en temps", score: 1, comment: "C'est une bonne approche pour se faire plaisir sans exc√®s et maintenir l'√©quilibre." },
                    D: { label: "D. Jamais, j‚Äô√©vite compl√®tement", score: 0, comment: "Tr√®s bien ! Les √©viter est un atout majeur pour la perte de poids et la sant√© g√©n√©rale." }
                }
            },
            q6: {
                text: "Manges-tu souvent devant un √©cran ?",
                options: {
                    A: { label: "A. Toujours devant la t√©l√©", score: 3, comment: "La distraction r√©duit la conscience de la sati√©t√©, ce qui peut t'amener √† manger plus que n√©cessaire." },
                    B: { label: "B. Souvent devant mon t√©l√©phone", score: 3, comment: "Comme la t√©l√©, le t√©l√©phone distrait et nuit √† l'√©coute de tes signaux de faim et de sati√©t√©." },
                    C: { label: "C. Parfois, mais j‚Äôessaie de faire attention", score: 1, comment: "Un effort louable. Essaye de t'accorder au moins un repas par jour sans distraction pour te reconnecter √† tes sensations." },
                    D: { label: "D. Non, je mange √† table sans distraction", score: 0, comment: "Excellent ! Manger en pleine conscience est une habitude cl√© pour mieux ressentir la sati√©t√© et r√©guler ton alimentation." }
                }
            },
            q7: {
                text: "Apr√®s tes repas, tu te sens :",
                options: {
                    A: { label: "A. Fatigu√©e ou ballonn√©e", score: 3, comment: "Ces sensations peuvent indiquer une mauvaise digestion, des repas trop lourds ou un d√©s√©quilibre alimentaire." },
                    B: { label: "B. Encore un peu affam√©e", score: 2, comment: "Cela sugg√®re un manque de prot√©ines, de fibres ou de volume dans tes repas. Tu pourrais √™tre plus rassasi√©(e)." },
                    C: { label: "C. Satisfaite et rassasi√©e", score: 0, comment: "Le sentiment id√©al ! Tes repas te fournissent ce dont tu as besoin sans exc√®s, c'est le signe d'un bon √©quilibre." },
                    D: { label: "D. Pr√™te √† grignoter ou chercher un dessert", score: 2, comment: "Cela peut signaler un d√©s√©quilibre des macronutriments (manque de prot√©ines/fibres) ou une habitude li√©e au sucre. Fais attention √† ces envies." }
                }
            },
            q8: {
                text: "Tes apports en prot√©ines, tu dirais que‚Ä¶",
                options: {
                    A: { label: "A. J‚Äôen mange trop peu ou pas √† chaque repas", score: 3, comment: "Les prot√©ines sont cruciales pour la sati√©t√©, la construction musculaire et le m√©tabolisme. Un manque peut entra√Æner des fringales." },
                    B: { label: "B. Je n‚Äôai aucune id√©e de combien il m‚Äôen faut", score: 2, comment: "Comprendre tes besoins en prot√©ines est un levier important pour la perte de poids et le maintien de ta masse musculaire." },
                    C: { label: "C. Je fais attention √† en avoir √† chaque repas (25‚Äì30g midi/soir)", score: 0, comment: "Parfait ! Une bonne r√©partition des prot√©ines tout au long de la journ√©e est essentielle pour la sati√©t√© et un m√©tabolisme actif." },
                    D: { label: "D. Je suis v√©g√©/v√©gan mais sans suivi pr√©cis", score: 2, comment: "Si tu suis un r√©gime v√©g√©tarien/v√©gan, il est crucial de bien planifier tes apports en prot√©ines v√©g√©tales pour √©viter les carences et rester rassasi√©(e)." }
                }
            },
            q9: {
                text: "Dans tes repas principaux, il y a souvent des f√©culents ?",
                options: {
                    A: { label: "A. Dans les deux repas (p√¢tes, riz, pain‚Ä¶)", score: 2, comment: "Les f√©culents fournissent de l'√©nergie, mais en consommer trop et √† tous les repas peut impacter la glyc√©mie et la perte de poids. Privil√©gie les c√©r√©ales compl√®tes." },
                    B: { label: "B. Au moins une fois par jour", score: 1, comment: "Bon √©quilibre ! L'important est la quantit√© et le type (privil√©gie les complexes)." },
                    C: { label: "C. Tr√®s peu, je privil√©gie l√©gumes et prot√©ines", score: 0, comment: "Excellente strat√©gie pour r√©duire l'apport calorique tout en √©tant rassasi√©(e) et en favorisant la perte de poids." },
                    D: { label: "D. Je ne fais pas attention", score: 2, comment: "La quantit√© et le type de f√©culents peuvent avoir un impact majeur sur ta glyc√©mie, ton √©nergie et ta capacit√© √† perdre du poids." }
                }
            },
            q10: {
                text: "10. Combien de pas fais-tu en moyenne chaque jour ?",
                options: {
                    A: { label: "A. Moins de 5000", score: 3, comment: "Un faible niveau d'activit√© physique est un frein majeur √† la d√©pense calorique et √† la perte de poids. Chaque pas compte !" },
                    B: { label: "B. Entre 5000 et 7000", score: 2, comment: "C'est un bon d√©but, mais viser plus haut (id√©alement 7000-10000 pas) peut acc√©l√©rer tes r√©sultats et am√©liorer ta sant√©." },
                    C: { label: "C. Entre 7000 et 10 000", score: 1, comment: "Tr√®s bien ! C'est un bon niveau d'activit√© quotidienne pour soutenir tes objectifs de perte de poids." },
                    D: { label: "D. Plus de 10 000", score: 0, comment: "Fantastique ! L'activit√© physique r√©guli√®re est un pilier essentiel de la perte de poids et du bien-√™tre g√©n√©ral." }
                }
            }
        };

        // Fonction pour afficher une question sp√©cifique
        function showQuestion(index, direction = 'next') {
            // Mise √† jour de la barre de progression
            const progress = ((index + 1) / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;

            if (index < 0 || index >= totalQuestions) return; // S√©curit√©

            const currentActive = document.querySelector('.quiz-section.active');
            const nextQuestion = quizSections[index];

            if (currentActive) {
                // Animer la sortie de la question actuelle
                currentActive.style.opacity = 0;
                currentActive.style.transform = `translateX(${direction === 'next' ? '-20px' : '20px'})`;
                currentActive.classList.remove('active');
                
                // Attendre la fin de l'animation de sortie avant d'animer l'entr√©e
                setTimeout(() => {
                    currentActive.style.display = 'none'; // Cacher l'ancienne question
                    nextQuestion.style.display = 'block'; // Afficher la nouvelle question
                    setTimeout(() => {
                        nextQuestion.style.opacity = 1;
                        nextQuestion.style.transform = 'translateX(0)';
                        nextQuestion.classList.add('active');
                    }, 50); // Petit d√©lai pour que l'opacit√© s'applique apr√®s le display block
                }, 300); // Dur√©e de l'animation de sortie
            } else {
                // Pour la premi√®re question (pas d'animation de sortie)
                nextQuestion.style.display = 'block';
                <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Diagnostic Perte de Poids</title>
    <style>
        /* Styles G√©n√©raux */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
        }
        #quizContainer {
            max-width: 800px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden; /* Important pour les animations de questions */
        }

        /* Barre de Progression */
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            height: 10px;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #28a745; /* Vert pour la progression */
            border-radius: 5px;
            transition: width 0.4s ease-in-out;
        }

        /* Questions et Options */
        .question-wrapper {
            position: relative;
            height: 250px; /* Hauteur suffisante pour contenir les questions */
            overflow: hidden;
        }
        .question-container {
            transition: transform 0.4s ease-out, opacity 0.4s ease-out;
            position: absolute;
            width: calc(100% - 60px); /* 100% - padding du quizContainer */
            padding: 0; /* Pas de padding ici, il est sur le quizContainer */
            left: 0;
            top: 0;
            opacity: 0;
            transform: translateX(100%);
            pointer-events: none; /* D√©sactiver les √©v√©nements de souris par d√©faut */
        }
        .question-container.active {
            opacity: 1;
            transform: translateX(0);
            position: relative; /* R√©activer la position normale */
            pointer-events: auto; /* R√©activer les √©v√©nements de souris */
        }
        .question-container.prev {
            transform: translateX(-100%);
        }
        .question-container h2 {
            color: #0056b3;
            margin-bottom: 20px;
        }
        .options label {
            display: block;
            background: #e9e9e9;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .options label:hover {
            background-color: #dcdcdc;
        }
        .options input[type="radio"] {
            margin-right: 10px;
            accent-color: #007bff; /* Couleur de la coche */
        }
        .options input[type="radio"]:checked + span {
            font-weight: bold;
            color: #007bff;
        }

        /* Boutons de Navigation */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 10px;
        }
        .navigation-buttons button,
        .result-actions button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease, transform 0.2s;
            flex-grow: 1; /* Permet aux boutons de grandir */
            text-align: center;
        }
        .navigation-buttons button:hover,
        .result-actions button:hover {
            transform: translateY(-2px);
        }
        #prevBtn {
            background-color: #6c757d; /* Gris */
            color: white;
        }
        #prevBtn:hover {
            background-color: #5a6268;
        }
        #submitBtn {
            background-color: #007bff; /* Bleu */
            color: white;
        }
        #submitBtn:hover {
            background-color: #0056b3;
        }
        #errorMessage {
            color: #dc3545; /* Rouge */
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
        }

        /* Section des R√©sultats */
        #resultatQuizDiv {
            display: none; /* Masqu√© par d√©faut */
            padding: 30px;
            text-align: center;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #resultatQuizDiv h2 {
            color: #28a745; /* Vert */
            margin-bottom: 20px;
        }
        #resultatQuizDiv h3 {
            color: #0056b3; /* Bleu */
            margin-top: 25px;
            margin-bottom: 15px;
        }
        #resultatQuizDiv p {
            line-height: 1.6;
            margin-bottom: 10px;
            text-align: left; /* Aligner le texte √† gauche pour une meilleure lisibilit√© */
        }
        #resultatQuizDiv ul {
            text-align: left;
            margin: 0 auto;
            padding-left: 20px;
            max-width: 600px;
            list-style: disc; /* Puces pour la liste */
        }
        #resultatQuizDiv li {
            margin-bottom: 8px;
        }

        /* Boutons d'Action des R√©sultats */
        .result-actions {
            margin-top: 30px;
            display: flex;
            flex-direction: column; /* Pour empiler les boutons */
            gap: 15px; /* Espace entre les boutons */
            align-items: center; /* Centrer les boutons */
        }
        #downloadPdfBtn, #metabolicCalculatorBtn {
            background-color: #28a745; /* Vert */
            color: white;
            width: 80%; /* Pour que les boutons soient de taille similaire */
            max-width: 350px; /* Limiter leur largeur maximale */
        }
        #downloadPdfBtn:hover, #metabolicCalculatorBtn:hover {
            background-color: #218838;
        }

    </style>
</head>
<body>
    <div id="quizContainer">
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <form id="quizForm">
            <div class="question-wrapper" id="questionWrapper">
                </div>

            <div class="navigation-buttons">
                <button type="button" id="prevBtn" style="display: none;">Pr√©c√©dent</button>
                <button type="button" id="submitBtn" style="display: none;">Valider le diagnostic</button>
            </div>
            <p id="errorMessage" style="display: none;"></p>
        </form>

        <div id="resultatQuizDiv" style="display: none;">
            <h2>Ton diagnostic personnalis√©</h2>
            <p id="diagnosticIntroElement"></p>
            <div id="diagnosticTextElement"></div>

            <div class="result-actions" id="downloadSectionDiv" style="display: none;">
                <button id="downloadPdfBtn">T√©l√©charger mon plan personnel</button>
                <button id="metabolicCalculatorBtn">Acc√©der au calculateur m√©tabolique</button>
            </div>
        </div>
    </div>

    <script>
        // --- DONN√âES DU QUIZ ---
        const questionsData = {
            q1: {
                text: "Combien de repas principaux consommes-tu par jour ?",
                options: {
                    "option1": { label: "a) 3 repas √©quilibr√©s", score: 0, comment: "Ton rythme de repas est id√©al pour maintenir un bon m√©tabolisme." },
                    "option2": { label: "b) Moins de 3 repas", score: 5, comment: "Sauter des repas peut ralentir ton m√©tabolisme et provoquer des fringales. Essaye de structurer tes prises alimentaires." },
                    "option3": { label: "c) Plus de 3 repas (avec grignotages)", score: 10, comment: "Les grignotages fr√©quents, m√™me sains, peuvent emp√™cher ton corps de puiser dans ses r√©serves. R√©duis la fr√©quence de tes repas." }
                }
            },
            q2: {
                text: "Quel type de boisson consommes-tu le plus souvent ?",
                options: {
                    "option1": { label: "a) De l'eau principalement", score: 0, comment: "L'eau est essentielle et n'apporte aucune calorie. Excellent choix pour l'hydratation !" },
                    "option2": { label: "b) Jus de fruits, sodas, boissons sucr√©es", score: 8, comment: "Les boissons sucr√©es sont une source cach√©e de calories et de sucre. Remplace-les par de l'eau ou des infusions non sucr√©es." },
                    "option3": { label: "c) Boissons chaudes avec sucre/lait", score: 4, comment: "Les calories liquides peuvent s'accumuler. Pense √† r√©duire le sucre et le lait dans tes boissons chaudes." }
                }
            },
            q3: {
                text: "Quelle est ta principale source de prot√©ines √† tes repas ?",
                options: {
                    "option1": { label: "a) Viandes maigres, poisson, ≈ìufs, l√©gumineuses", score: 0, comment: "Bonne vari√©t√© de prot√©ines, essentielles pour la sati√©t√© et la masse musculaire." },
                    "option2": { label: "b) Principalement des viandes rouges grasses ou charcuteries", score: 6, comment: "Privil√©gie les prot√©ines maigres pour un meilleur √©quilibre nutritionnel et une r√©duction des graisses satur√©es." },
                    "option3": { label: "c) Je n'en consomme pas assez ou je ne sais pas", score: 7, comment: "Un apport insuffisant en prot√©ines peut entra√Æner une perte musculaire et un manque de sati√©t√©. Augmente ta consommation." }
                }
            },
             q4: {
                text: "Comment g√®res-tu les f√©culents (p√¢tes, riz, pain, pommes de terre) dans ton alimentation ?",
                options: {
                    "option1": { label: "a) En quantit√© mod√©r√©e, de pr√©f√©rence complets", score: 0, comment: "Excellente gestion des glucides complexes. Les f√©culents complets sont riches en fibres." },
                    "option2": { label: "b) J'en mange en grande quantit√© √† chaque repas", score: 7, comment: "Une consommation excessive de f√©culents peut freiner la perte de poids. Adapte les quantit√©s √† ton activit√© physique." },
                    "option3": { label: "c) Je les supprime totalement de mon alimentation", score: 5, comment: "Supprimer totalement les f√©culents peut entra√Æner des carences et des fringales. Une consommation √©quilibr√©e est pr√©f√©rable." }
                }
            },
            q5: {
                text: "Manges-tu des fruits et l√©gumes √† chaque repas ?",
                options: {
                    "option1": { label: "a) Oui, √† chaque repas et en collation", score: 0, comment: "Tr√®s bon apport en fibres, vitamines et min√©raux, essentiels pour la sati√©t√© et la sant√©." },
                    "option2": { label: "b) Occasionnellement, quand j'y pense", score: 5, comment: "Augmente ta consommation de fruits et l√©gumes. Ils t'aideront √† te sentir rassasi√©(e) et apporteront des nutriments essentiels." },
                    "option3": { label: "c) Rarement ou pas du tout", score: 8, comment: "Manque important de fibres et de nutriments essentiels. Cela peut expliquer des fringales et un transit difficile. Fais-en une priorit√©." }
                }
            },
            q6: {
                text: "Comment g√®res-tu le stress et les √©motions dans ton quotidien ?",
                options: {
                    "option1": { label: "a) J'ai des techniques de gestion du stress efficaces (sport, m√©ditation...)", score: 0, comment: "Excellente gestion du stress, ce qui minimise le risque de manger √©motionnellement." },
                    "option2": { label: "b) Je mange parfois mes √©motions", score: 7, comment: "Manger √©motionnellement est un pi√®ge courant. Explore des alternatives saines pour g√©rer tes √©motions." },
                    "option3": { label: "c) Je suis tr√®s stress√©(e) et je compense souvent par la nourriture", score: 10, comment: "Le stress chronique et l'alimentation √©motionnelle sont des obstacles majeurs. Il est crucial d'adresser ces probl√®mes pour des r√©sultats durables." }
                }
            },
            q7: {
                text: "Quel est ton niveau d'activit√© physique ?",
                options: {
                    "option1": { label: "a) Je fais du sport r√©guli√®rement (3 fois/semaine ou plus)", score: 0, comment: "Tr√®s bon niveau d'activit√© physique, qui contribue activement √† la d√©pense calorique et √† la masse musculaire." },
                    "option2": { label: "b) Je bouge un peu, mais pas de sport organis√©", score: 5, comment: "Augmenter ton activit√© physique (marche, escaliers) peut faire une grande diff√©rence. Chaque pas compte !" },
                    "option3": { label: "c) Je suis majoritairement s√©dentaire", score: 8, comment: "La s√©dentarit√© est un frein majeur. Commence par de petites activit√©s quotidiennes et augmente progressivement. Bouger est essentiel." }
                }
            },
            q8: {
                text: "Comment est la qualit√© de ton sommeil ?",
                options: {
                    "option1": { label: "a) Je dors bien et suffisamment (7-9h par nuit)", score: 0, comment: "Un sommeil de qualit√© est crucial pour la r√©gulation des hormones de la faim et la r√©cup√©ration. Parfait !" },
                    "option2": { label: "b) Mon sommeil est irr√©gulier ou insuffisant", score: 6, comment: "Un manque de sommeil peut perturber les hormones et augmenter les fringales. Am√©liore tes habitudes de sommeil." },
                    "option3": { label: "c) J'ai de gros probl√®mes de sommeil (insomnies, r√©veils fr√©quents)", score: 9, comment: "Des troubles du sommeil importants peuvent fortement impacter ton m√©tabolisme et tes envies de manger. Consulte si besoin." }
                }
            },
            q9: {
                text: "Consommes-tu des aliments transform√©s, fast-food, ou plats pr√©par√©s ?",
                options: {
                    "option1": { label: "a) Rarement, je cuisine majoritairement maison", score: 0, comment: "Excellent contr√¥le sur ton alimentation en privil√©giant le fait maison. Moins de sucres cach√©s et de mauvaises graisses." },
                    "option2": { label: "b) De temps en temps, par commodit√©", score: 5, comment: "La consommation occasionnelle est g√©rable, mais sois conscient(e) des calories et des ingr√©dients. Privil√©gie le fait maison." },
                    "option3": { label: "c) Souvent, ils constituent une part importante de mes repas", score: 10, comment: "Ces aliments sont souvent riches en calories, sucres, sel et mauvaises graisses, et pauvres en nutriments. R√©duis-les au maximum." }
                }
            },
            q10: {
                text: "As-tu tendance √† manger devant les √©crans (TV, smartphone, ordinateur) ?",
                options: {
                    "option1": { label: "a) Non, je mange en pleine conscience", score: 0, comment: "Manger en pleine conscience aide √† mieux percevoir la sati√©t√© et √† appr√©cier le repas. C'est une habitude pr√©cieuse." },
                    "option2": { label: "b) Parfois, quand je suis press√©(e)", score: 3, comment: "Manger devant les √©crans peut te faire manger plus et moins bien. Essaye de te concentrer sur ton repas." },
                    "option3": { label: "c) Oui, presque toujours", score: 7, comment: "Cette habitude favorise la surconsommation et la mauvaise digestion car tu ne per√ßois pas bien les signaux de sati√©t√©. Mange sans distraction." }
                }
            }
        };

        // --- VARIABLES GLOBALES ---
        const totalQuestions = Object.keys(questionsData).length;
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let allQuestionsAnswered = false; // Pour suivre si toutes les questions sont r√©pondues

        // --- R√âF√âRENCES AUX √âL√âMENTS DU DOM ---
        const quizForm = document.getElementById('quizForm');
        const questionWrapper = document.getElementById('questionWrapper');
        const prevBtn = document.getElementById('prevBtn');
        const submitBtn = document.getElementById('submitBtn');
        const errorMessage = document.getElementById('errorMessage');
        const progressBar = document.getElementById('progressBar');

        const resultatQuizDiv = document.getElementById('resultatQuizDiv');
        const diagnosticIntroElement = document.getElementById('diagnosticIntroElement');
        const diagnosticTextElement = document.getElementById('diagnosticTextElement');
        const downloadSectionDiv = document.getElementById('downloadSectionDiv');

        const metabolicCalculatorBtn = document.getElementById('metabolicCalculatorBtn');


        // --- FONCTIONS DU QUIZ ---

        /**
         * Met √† jour la largeur de la barre de progression.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Affiche la question sp√©cifi√©e et g√®re les animations de transition.
         * @param {number} index - L'index de la question √† afficher.
         * @param {string} direction - La direction de l'animation ('next' ou 'prev').
         */
        function showQuestion(index, direction = 'next') {
            const questionKeys = Object.keys(questionsData);

            if (index < 0 || index >= totalQuestions) {
                return; // Emp√™che d'aller hors des limites des questions
            }

            const questionData = questionsData[questionKeys[index]];
            let newQuestionHTML = `
                <h2>Question ${index + 1}/${totalQuestions}</h2>
                <p>${questionData.text}</p>
                <div class="options">
            `;
            for (const [optionKey, optionValue] of Object.entries(questionData.options)) {
                // V√©rifie si cette option √©tait d√©j√† s√©lectionn√©e par l'utilisateur
                const isChecked = userAnswers[questionKeys[index]] === optionKey ? 'checked' : '';
                newQuestionHTML += `
                    <label>
                        <input type="radio" name="${questionKeys[index]}" value="${optionKey}" ${isChecked}>
                        <span>${optionValue.label}</span>
                    </label>
                `;
            }
            newQuestionHTML += `</div>`;

            const newQuestionDiv = document.createElement('div');
            newQuestionDiv.classList.add('question-container');
            newQuestionDiv.innerHTML = newQuestionHTML;

            // Applique la direction initiale pour l'animation
            if (direction === 'next') {
                newQuestionDiv.style.transform = 'translateX(100%)';
            } else { // 'prev'
                newQuestionDiv.style.transform = 'translateX(-100%)';
            }
            newQuestionDiv.style.opacity = 0;
            questionWrapper.appendChild(newQuestionDiv);

            // G√®re l'ancienne question (si elle existe) pour l'animation de sortie
            const currentQuestions = questionWrapper.querySelectorAll('.question-container');
            if (currentQuestions.length > 1) {
                const oldQuestion = currentQuestions[0];
                oldQuestion.style.transform = direction === 'next' ? 'translateX(-100%)' : 'translateX(100%)';
                oldQuestion.style.opacity = 0;
                // Supprime l'ancienne question apr√®s la fin de son animation
                setTimeout(() => {
                    oldQuestion.remove();
                }, 400); // Doit correspondre √† la dur√©e de transition CSS
            }

            // Anime la nouvelle question pour qu'elle entre en vue
            setTimeout(() => {
                newQuestionDiv.style.opacity = 1;
                newQuestionDiv.style.transform = 'translateX(0)';
                newQuestionDiv.classList.add('active');
            }, 50); // Petit d√©lai pour le rendu initial avant l'animation

            updateProgressBar();

            // Met √† jour la visibilit√© des boutons de navigation
            prevBtn.style.display = index === 0 ? 'none' : 'block';
            submitBtn.style.display = index === totalQuestions - 1 ? 'block' : 'none';

            errorMessage.style.display = 'none';

            // R√©-attache les √©couteurs d'√©v√©nements aux nouvelles radios pour assurer qu'ils sont actifs
            // Retire d'abord pour √©viter les √©couteurs multiples
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.removeEventListener('change', handleRadioChange);
                radio.addEventListener('change', handleRadioChange);
            });
        }

        /**
         * G√®re le changement d'√©tat d'un bouton radio.
         * Enregistre la r√©ponse et g√®re l'avancement automatique.
         */
        function handleRadioChange(event) {
            const questionName = event.target.name;
            const selectedValue = event.target.value;
            userAnswers[questionName] = selectedValue;

            errorMessage.style.display = 'none';

            // V√©rifie si toutes les questions ont √©t√© r√©pondues apr√®s cette s√©lection
            allQuestionsAnswered = Object.keys(userAnswers).length === totalQuestions;

            setTimeout(() => {
                if (currentQuestionIndex < totalQuestions - 1) {
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex, 'next');
                } else {
                    // Si c'est la derni√®re question et qu'elle vient d'√™tre r√©pondue,
                    // et que toutes les autres l'√©taient d√©j√†, on peut calculer le diagnostic.
                    if (allQuestionsAnswered) {
                         calculerDiagnostic();
                    }
                    // Si ce n'est pas toutes r√©pondues, le bouton submit le signalera.
                }
            }, 400); // D√©lai pour l'animation de s√©lection
        }


        /**
         * Calcule le diagnostic bas√© sur les r√©ponses de l'utilisateur
         * et affiche le r√©sultat personnalis√©.
         */
        function calculerDiagnostic() {
            let totalScore = 0;
            let problematicAreas = []; // Contient les commentaires des r√©ponses qui indiquent un point √† am√©liorer

            // V√©rifie une derni√®re fois si toutes les questions ont √©t√© r√©pondues
            allQuestionsAnswered = Object.keys(userAnswers).length === totalQuestions;
            if (!allQuestionsAnswered) {
                errorMessage.textContent = "Veuillez r√©pondre √† toutes les questions avant de valider le quiz.";
                errorMessage.style.display = 'block';
                return;
            }

            for (let i = 1; i <= totalQuestions; i++) {
                const questionName = `q${i}`;
                const userAnswer = userAnswers[questionName];

                const questionData = questionsData[questionName];
                const optionData = questionData.options[userAnswer];
                const score = optionData.score;
                const comment = optionData.comment;

                totalScore += score;
                if (score > 0) { // Si le score est sup√©rieur √† 0, c'est une zone √† am√©liorer
                    problematicAreas.push(comment);
                }
            }

            // --- Logique d'analyse et de recommandations am√©lior√©e ---
            let diagnosticIntroText = "";
            let detailedBilanText = "<h3>Votre Bilan d√©taill√© et les Pistes d'am√©lioration :</h3>";

            if (totalScore <= 5) {
                diagnosticIntroText = "F√©licitations ! Ton alimentation et tes habitudes de vie sont globalement tr√®s bien align√©es avec une perte de poids saine. Tu as de solides fondations !";
                detailedBilanText += "<p>Tes r√©ponses montrent une **excellente compr√©hension** des principes d'une alimentation saine et d'un mode de vie √©quilibr√©. Tu g√®res bien tes repas, ton sommeil et ton niveau d'activit√© physique. Pour maintenir ces acquis et continuer √† progresser, la **coh√©rence** sera ta meilleure alli√©e. N'h√©site pas √† explorer de nouvelles recettes saines pour **√©viter la monotonie** et garder le plaisir de manger sainement. Tu es sur la bonne voie !</p>";
            } else if (totalScore <= 15) {
                diagnosticIntroText = "Tu es sur la **tr√®s bonne voie** ! Quelques ajustements cibl√©s peuvent t'aider √† optimiser ta perte de poids. Tes habitudes sont globalement bonnes, mais il existe des **marges de progression int√©ressantes** qui feront une grande diff√©rence.";
                detailedBilanText += "<p>Tes r√©ponses r√©v√®lent des **opportunit√©s d'am√©lioration sp√©cifiques** qui, une fois adress√©es, feront une grande diff√©rence :</p><ul>";
                detailedBilanText += problematicAreas.map(comment => `<li>${comment}</li>`).join('');
                detailedBilanText += "</ul><p>En travaillant sur ces aspects, m√™me par **petites √©tapes**, tu verras rapidement des progr√®s significatifs. La **r√©gularit√©** et la **patience** sont essentielles !</p>";
            } else if (totalScore <= 25) {
                diagnosticIntroText = "Ton alimentation et tes habitudes de vie pr√©sentent **plusieurs points importants** qui pourraient freiner ta perte de poids. Ne t'inqui√®te pas, c'est le moment id√©al pour **prendre conscience** et mettre en place des changements pour des r√©sultats durables !";
                detailedBilanText += "<p>Il y a des habitudes qui ont un **impact certain** sur ta capacit√© √† perdre du poids. Concentre-toi sur les domaines suivants pour voir un r√©el changement :</p><ul>";
                detailedBilanText += problematicAreas.map(comment => `<li>${comment}</li>`).join('');
                detailedBilanText += "</ul><p>Commence par les **deux ou trois points** qui te semblent les plus faciles √† modifier pour commencer √† construire une dynamique positive. Chaque petit pas compte et te rapprochera de tes objectifs !</p>";
            } else {
                diagnosticIntroText = "Il semblerait que tes habitudes actuelles soient un **obstacle significatif** √† ta perte de poids. Mais la bonne nouvelle, c'est que tu as maintenant une **clart√© totale** sur les domaines √† am√©liorer. Le changement est √† ta port√©e, et ce quiz est le premier pas vers une transformation !";
                detailedBilanText += "<p>Tes r√©ponses sugg√®rent plusieurs **d√©fis importants** qui peuvent bloquer ta perte de poids. Voici les domaines **prioritaires** sur lesquels travailler pour une v√©ritable transformation :</p><ul>";
                detailedBilanText += problematicAreas.map(comment => `<li>${comment}</li>`).join('');
                detailedBilanText += "</ul><p>Commence par un ou deux **changements simples mais r√©guliers** qui te paraissent g√©rables. L'important est de d√©marrer et de construire de nouvelles habitudes progressivement. N'h√©site pas √† te faire accompagner pour ces changements profonds. **Tu as le pouvoir de transformer ta sant√© et d'atteindre tes objectifs !**</p>";
            }

            diagnosticIntroElement.textContent = diagnosticIntroText;
            diagnosticTextElement.innerHTML = detailedBilanText;

            // Cacher la barre de progression une fois le quiz termin√©
            document.querySelector('.progress-bar-container').style.display = 'none';

            // Afficher la section des r√©sultats et les boutons d'action
            resultatQuizDiv.style.display = 'block';
            downloadSectionDiv.style.display = 'flex'; // Utilise flex pour empiler les boutons
            document.getElementById('quizForm').style.display = 'none'; // Cache le formulaire du quiz
        }

        // --- √âCOUTEURS D'√âV√âNEMENTS ---

        // G√©rer le bouton Pr√©c√©dent
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex, 'prev');
            }
        });

        // G√©rer le bouton de soumission du quiz
        submitBtn.addEventListener('click', () => {
            // Assurez-vous que toutes les questions ont √©t√© r√©pondues
            allQuestionsAnswered = Object.keys(userAnswers).length === totalQuestions;

            if (!allQuestionsAnswered) {
                errorMessage.textContent = "Veuillez r√©pondre √† toutes les questions avant de valider le quiz.";
                errorMessage.style.display = 'block';
                return;
            }
            calculerDiagnostic();
        });

        // Gestion du t√©l√©chargement du PDF
        document.getElementById('downloadPdfBtn').onclick = function() {
            // Ici, vous pouvez int√©grer une biblioth√®que comme html2pdf.js pour g√©n√©rer un PDF dynamique
            // Pour l'instant, cela redirige simplement vers un fichier statique
            window.location.href = 'mon_plan_personnel.pdf';
        };

        // Gestion du bouton Calculateur M√©tabolique
        metabolicCalculatorBtn.onclick = function() {
            // Redirige l'utilisateur vers la page de votre calculateur m√©tabolique
            // N'oubliez pas de cr√©er ce fichier !
            window.location.href = 'calculateur-metabolique.html';
        };


        // --- INITIALISATION ---
        // Afficher la premi√®re question au chargement de la page
        showQuestion(currentQuestionIndex);
    </script>
</body>
</html>
